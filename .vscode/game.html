<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Arcade Football JS</title>
    <style>
        body {
            margin: 0;
            background-color: #222;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: white;
            overflow: hidden;
        }

        h1 { margin-bottom: 10px; font-size: 24px; text-transform: uppercase; letter-spacing: 2px; }
        
        #scoreboard {
            font-size: 40px;
            font-weight: bold;
            margin-bottom: 10px;
            background: #333;
            padding: 10px 30px;
            border-radius: 10px;
            border: 2px solid #555;
            display: flex;
            gap: 20px;
        }

        .p-score { color: #4facfe; }
        .c-score { color: #ff5e62; }

        canvas {
            border: 4px solid #fff;
            border-radius: 4px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            background-color: #4CAF50; /* Grass Green */
        }

        .controls { margin-top: 10px; font-size: 14px; color: #aaa; }
    </style>
</head>
<body>

    <div id="scoreboard">
        <span class="p-score" id="playerScore">0</span> - <span class="c-score" id="cpuScore">0</span>
    </div>

    <canvas id="gameCanvas" width="800" height="500"></canvas>

    <div class="controls">
        ARROWS to Move | SPACE to Shoot
    </div>

<script>
    // --- Configuration ---
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const pScoreEl = document.getElementById('playerScore');
    const cScoreEl = document.getElementById('cpuScore');

    // Game Constants
    const FRICTION = 0.98; // Ball slows down
    const PLAYER_SPEED = 5;
    const CPU_SPEED = 4.2; // CPU is slightly slower for fairness
    const KICK_POWER = 12;
    const DRIBBLE_POWER = 3;
    
    // Game State
    let playerScore = 0;
    let cpuScore = 0;

    // --- Objects ---

    const ball = {
        x: canvas.width / 2,
        y: canvas.height / 2,
        radius: 10,
        dx: 0,
        dy: 0,
        color: 'white',
        stroke: 'black'
    };

    const player = {
        x: 100,
        y: canvas.height / 2,
        radius: 20,
        color: '#4facfe', // Blue
        stroke: '#0072ff'
    };

    const cpu = {
        x: canvas.width - 100,
        y: canvas.height / 2,
        radius: 20,
        color: '#ff5e62', // Red
        stroke: '#d31027'
    };

    const goal = {
        width: 10,
        height: 150,
        y: (canvas.height / 2) - 75
    };

    // Input Handling
    const keys = {
        ArrowUp: false,
        ArrowDown: false,
        ArrowLeft: false,
        ArrowRight: false,
        Space: false
    };

    document.addEventListener('keydown', (e) => {
        if(e.code === 'Space') keys.Space = true;
        if(e.key === 'ArrowUp') keys.ArrowUp = true;
        if(e.key === 'ArrowDown') keys.ArrowDown = true;
        if(e.key === 'ArrowLeft') keys.ArrowLeft = true;
        if(e.key === 'ArrowRight') keys.ArrowRight = true;
    });

    document.addEventListener('keyup', (e) => {
        if(e.code === 'Space') keys.Space = false;
        if(e.key === 'ArrowUp') keys.ArrowUp = false;
        if(e.key === 'ArrowDown') keys.ArrowDown = false;
        if(e.key === 'ArrowLeft') keys.ArrowLeft = false;
        if(e.key === 'ArrowRight') keys.ArrowRight = false;
    });

    // --- Core Logic ---

    function update() {
        // 1. Move Player
        if (keys.ArrowUp && player.y > player.radius) player.y -= PLAYER_SPEED;
        if (keys.ArrowDown && player.y < canvas.height - player.radius) player.y += PLAYER_SPEED;
        if (keys.ArrowLeft && player.x > player.radius) player.x -= PLAYER_SPEED;
        if (keys.ArrowRight && player.x < canvas.width - player.radius) player.x += PLAYER_SPEED;

        // 2. Move CPU (Simple AI)
        // AI tries to get behind the ball to kick it towards player goal (Left)
        let targetX = ball.x;
        let targetY = ball.y;

        // Simple strategy: align Y first
        if (cpu.y < targetY - 5) cpu.y += CPU_SPEED;
        else if (cpu.y > targetY + 5) cpu.y -= CPU_SPEED;
        
        // Move X
        if (cpu.x < targetX) cpu.x += CPU_SPEED;
        else if (cpu.x > targetX) cpu.x -= CPU_SPEED;

        // Keep CPU in bounds
        cpu.x = Math.max(cpu.radius, Math.min(canvas.width - cpu.radius, cpu.x));
        cpu.y = Math.max(cpu.radius, Math.min(canvas.height - cpu.radius, cpu.y));


        // 3. Ball Physics
        ball.x += ball.dx;
        ball.y += ball.dy;
        ball.dx *= FRICTION;
        ball.dy *= FRICTION;

        // Stop ball if very slow
        if (Math.abs(ball.dx) < 0.05) ball.dx = 0;
        if (Math.abs(ball.dy) < 0.05) ball.dy = 0;

        // Wall Collisions (Top/Bottom)
        if (ball.y + ball.radius > canvas.height || ball.y - ball.radius < 0) {
            ball.dy = -ball.dy;
        }
        
        // Goal Scoring Logic (Left/Right Walls)
        // Check if ball is within vertical goal area
        let inGoalArea = (ball.y > goal.y && ball.y < goal.y + goal.height);

        if (ball.x - ball.radius < 0) {
            if (inGoalArea) {
                // CPU Scored (Left Goal)
                cpuScore++;
                resetRound();
            } else {
                ball.dx = -ball.dx;
                ball.x = ball.radius;
            }
        } else if (ball.x + ball.radius > canvas.width) {
            if (inGoalArea) {
                // Player Scored (Right Goal)
                playerScore++;
                resetRound();
            } else {
                ball.dx = -ball.dx;
                ball.x = canvas.width - ball.radius;
            }
        }

        // 4. Player/Ball Collision
        checkCollision(player);
        checkCollision(cpu);

        // Update Score Text
        pScoreEl.innerText = playerScore;
        cScoreEl.innerText = cpuScore;
    }

    function checkCollision(p) {
        // Calculate distance between ball and player
        let dx = ball.x - p.x;
        let dy = ball.y - p.y;
        let distance = Math.sqrt(dx * dx + dy * dy);

        // Collision detected
        if (distance < p.radius + ball.radius) {
            // Determine Kick Power
            let power = (p === player && keys.Space) ? KICK_POWER : DRIBBLE_POWER;
            
            // Normalize the vector
            let angle = Math.atan2(dy, dx);
            
            ball.dx = Math.cos(angle) * power;
            ball.dy = Math.sin(angle) * power;

            // Push ball slightly out of player to prevent sticking
            ball.x = p.x + (p.radius + ball.radius + 1) * Math.cos(angle);
            ball.y = p.y + (p.radius + ball.radius + 1) * Math.sin(angle);
        }
    }

    function resetRound() {
        ball.x = canvas.width / 2;
        ball.y = canvas.height / 2;
        ball.dx = 0;
        ball.dy = 0;

        player.x = 100;
        player.y = canvas.height / 2;

        cpu.x = canvas.width - 100;
        cpu.y = canvas.height / 2;
    }

    // --- Rendering ---

    function drawField() {
        // Grass Strips styling (optional visual flair)
        ctx.fillStyle = "#4CAF50";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        ctx.strokeStyle = "rgba(255,255,255,0.7)";
        ctx.lineWidth = 4;

        // Center Line
        ctx.beginPath();
        ctx.moveTo(canvas.width / 2, 0);
        ctx.lineTo(canvas.width / 2, canvas.height);
        ctx.stroke();

        // Center Circle
        ctx.beginPath();
        ctx.arc(canvas.width / 2, canvas.height / 2, 70, 0, Math.PI * 2);
        ctx.stroke();

        // Goals
        ctx.fillStyle = "rgba(255, 255, 255, 0.3)";
        // Left Goal
        ctx.fillRect(0, goal.y, goal.width, goal.height);
        // Right Goal
        ctx.fillRect(canvas.width - goal.width, goal.y, goal.width, goal.height);
    }

    function drawCircle(x, y, radius, color, stroke) {
        ctx.beginPath();
        ctx.arc(x, y, radius, 0, Math.PI * 2);
        ctx.fillStyle = color;
        ctx.fill();
        ctx.lineWidth = 3;
        ctx.strokeStyle = stroke;
        ctx.stroke();
        ctx.closePath();
    }

    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        drawField();

        // Draw Player
        drawCircle(player.x, player.y, player.radius, player.color, player.stroke);
        
        // Draw CPU
        drawCircle(cpu.x, cpu.y, cpu.radius, cpu.color, cpu.stroke);

        // Draw Ball (Soccer ball look)
        ctx.beginPath();
        ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
        ctx.fillStyle = "white";
        ctx.fill();
        ctx.strokeStyle = "black";
        ctx.lineWidth = 2;
        ctx.stroke();
        ctx.closePath();
    }

    // --- Game Loop ---
    function loop() {
        update();
        draw();
        requestAnimationFrame(loop);
    }

    // Start Game
    loop();

</script>
</body>
</html>